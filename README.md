# Gravity-simulation
Test task: Simulation of the gravitational interaction of bodies. It is necessary to implement a simulation of the gravitational interaction of bodies.
=======
# Gravity Simulator 3D (SwiftUI + SceneKit)

Интерактивный 3D-симулятор гравитационного движения тел с реалистичными столкновениями, визуализацией траекторий и эффектами ударной волны.

---

## Основные возможности

- **Добавление тел**:
  - Любое количество тел — ограничений нет
  - Настраиваемые параметры:
    - Масса
    - Размер
    - Начальная позиция (X, Y, Z)
    - Начальная скорость (Vx, Vy, Vz)
    - Форма: сфера, куб, цилиндр
    - Цвет

- **Физика движения**:
  - Гравитационные взаимодействия между всеми телами
  - Вычисление сил, ускорений и скоростей по шагам времени
  - Пошаговое обновление позиций тел

- **Столкновения**:
  - Определение столкновения по радиусам тел
  - Импульсное изменение скорости с коэффициентом восстановления (упругость)
  - Визуальная индикация столкновения через кратковременное свечение тела

- **Ударные волны**:
  - Анимация кольца (SCNTorus) в точке столкновения
  - Размер и цвет зависят от масс и радиусов тел
  - Плавное увеличение и исчезновение (`scale + fadeOut`) через 0.4 секунды

- **Траектории и таймлайн**:
  - Каждое тело рисует свою траекторию движения
  - Можно перемещаться к любому кадру и просматривать траектории
  - Анимация коллизий и ударных волн для выбранного кадра

- **Воспроизведение симуляции**:
  - Play / Pause
  - Управление скоростью воспроизведения
  - Перемотка по кадрам через слайдер
  - Показ сил и ускорений выбранного тела

- **3D-сцена и визуализация**:
  - Камера с управлением жестами
  - Отображение координатных осей
  - Разноцветные тела с выбранными формами
  - Траектории движения всех тел в реальном времени

---

## Физика и алгоритмы

### Гравитация
- Каждое тело взаимодействует с остальными по закону всемирного тяготения:
  \[
  F = G \frac{m_1 m_2}{r^2}
  \]
- Суммарная сила рассчитывается для каждого тела, затем обновляются ускорение, скорость и позиция.

### Столкновения
- Определение столкновения: если расстояние между центрами тел меньше суммы радиусов:
  \[
  dist < r_1 + r_2
  \]
- Реакция тел через импульсное решение с коэффициентом восстановления:
  \[
  \text{impulse} = -(1+e) v_{rel\_along\_normal} / (1/m_1 + 1/m_2)
  \]

### Анимация ударной волны
- Кольцо создаётся в точке столкновения
- Размер кольца:
  \[
  size = (r_1 + r_2) \cdot \sqrt{m_1 + m_2} \cdot 0.5
  \]
- Цвет — бело-голубой с прозрачностью
- Плавно увеличивается и исчезает через 0.4 сек (`scale + fadeOut`)
- Автоматически удаляется из сцены после анимации

### Timeline и траектории
- Каждое состояние тел сохраняется в `timeline`
- Перемотка по кадрам через `goTo(index:)`
- Все тела рисуют свои траектории (`showTrail`)

---

## Интерфейс

### Основной экран
- 3D-сцена с телами, траекториями и осями
- Кнопки:
  - **Рассчитать** — запуск симуляции
  - **Play / Pause** — воспроизведение
- Слайдер:
  - Перемотка по кадрам
  - Управление скоростью воспроизведения

### Панель добавления тела
- Поля ввода: X, Y, Z, Vx, Vy, Vz, Масса, Размер
- Цвет и форма тела
- Кнопки **Добавить** и **Отмена**
- Можно добавлять любое количество тел

### Информация о теле (по тапу)
- Имя, форма, размер, масса
- Позиция, скорость
- Сила и ускорение в текущий момент

---

## Используемые технологии

- SwiftUI
- SceneKit
- SIMD
  
---

## Запуск

1. Откройте проект в Xcode.
2. Выберите симулятор или устройство.
3. Запустите приложение (`⌘R`).

---

